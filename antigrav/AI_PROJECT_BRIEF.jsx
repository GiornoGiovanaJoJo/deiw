/*
╔═══════════════════════════════════════════════════════════════════════════════╗
║                                                                               ║
║                 EP-SYSTEM - ПРАКТИЧЕСКОЕ РУКОВОДСТВО ДЛЯ ИИ                 ║
║                    "Как воссоздать проект с нуля за нуль"                    ║
║                                                                               ║
║  Дата: 2026-02-02                                                            ║
║  Язык: Русский                                                               ║
║  Для: Другого ИИ (Claude, GPT, другой Base44 агент)                         ║
║                                                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝


═══════════════════════════════════════════════════════════════════════════════════
ЧАСТЬ 1: ЧТО ЭТО ЗА СИСТЕМА?
═══════════════════════════════════════════════════════════════════════════════════

EP-System — это приложение для управления строительными проектами.

КРАТКО:
  Компания занимается строительством/ремонтом. Они нанимают людей, покупают материалы,
  делают проекты. EP-System это система где все это отслеживается - проекты, люди,
  материалы, задачи, документы, обсуждения.

ГЛАВНЫЕ ФУНКЦИИ:
  ✓ Создание и управление проектами
  ✓ Назначение людей на проекты
  ✓ Разбиение проекта на этапы (фазы работ)
  ✓ Создание задач и назначение на людей
  ✓ Управление материалами на складе (выемка, возврат, приход)
  ✓ Загрузка документов (планы, контракты, отчеты)
  ✓ Обсуждение через комментарии с @mentions
  ✓ Просмотр с мобильного (PWA, offline, фото с камеры)


═══════════════════════════════════════════════════════════════════════════════════
ЧАСТЬ 2: КАКИЕ ЕСТЬ РОЛИ И ЧТО КАЖДАЯ МОЖЕТ ДЕЛАТЬ
═══════════════════════════════════════════════════════════════════════════════════

РОЛИ (6 штук):

┌─────────────────────────────────────────────────────────────────────────────┐
│ 1. ADMIN (Администратор) - ПОЛНЫЙ ДОСТУП КО ВСЕМУ                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ Где может зайти:                                                            │
│   ✓ ВСЕ страницы (Dashboard, Projekte, Aufgaben, Waren, Terminal и т.д.)   │
│                                                                             │
│ Что может делать:                                                           │
│   ✓ Создавать/редактировать/удалять ЛЮБЫЕ проекты                         │
│   ✓ Видеть ВСЕ задачи всех людей                                          │
│   ✓ Управлять всем складом (товары, выемка, возврат и т.д.)               │
│   ✓ Видеть всех пользователей и создавать новых                           │
│   ✓ Управлять клиентами, подрядчиками                                      │
│   ✓ Видеть все комментарии и удалять любые                                │
│   ✓ Просматривать все отчеты и документы                                  │
│   ✓ Просматривать поддержку (tickets) всех клиентов                        │
│                                                                             │
│ Примечание: Может видеть комментарии других и удалять их                   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│ 2. PROJEKTLEITER (Руководитель проекта)                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ Где может зайти:                                                            │
│   ✓ Dashboard, Aufgaben, Benutzer, Kunden, Projekte, Kategorien           │
│   ✗ НЕ может: Terminal, Waren, Lager, Support                             │
│                                                                             │
│ Что может делать:                                                           │
│   ✓ Создавать и управлять СВОИМИ проектами                                │
│   ✓ Видеть только проекты где он назначен (как projektleiter)             │
│   ✓ Видеть всех своих подчиненных (Gruppenleiter'ов и Worker'ов)          │
│   ✓ Назначать людей на проекты (только свои)                              │
│   ✓ Создавать задачи в своих проектах                                     │
│   ✓ Видеть задачи только в своих проектах                                 │
│   ✓ Комментировать и обсуждать                                            │
│   ✓ Загружать документы к своим проектам                                   │
│   ✓ Просматривать отчеты по своим проектам                                │
│                                                                             │
│ ВАЖНО: Видит иерархию - только своих подчиненных!                          │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│ 3. GRUPPENLEITER (Руководитель группы)                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ Где может зайти:                                                            │
│   ✓ Dashboard, Aufgaben, Benutzer, Projekte                                │
│   ✗ НЕ может: Kunden, Terminal, Waren, Kategorien, Support                │
│                                                                             │
│ Что может делать:                                                           │
│   ✓ Видеть только своих Worker'ов (которых он курирует)                   │
│   ✓ Создавать задачи для своих Worker'ов                                  │
│   ✓ Видеть проекты где работают его Worker'ы                               │
│   ✓ Менять статусы задач                                                   │
│   ✓ Комментировать в своих проектах                                        │
│                                                                             │
│ ВАЖНО: Более ограниченный доступ чем Projektleiter                         │
│        Видит только данные своего подразделения                            │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│ 4. WORKER (Рабочий)                                                         │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ Где может зайти:                                                            │
│   ✓ Dashboard, Aufgaben, Projekte, Benutzer                                │
│   ✗ НЕ может: Kunden, Waren, Terminal, Kategorien, Lager, Support         │
│                                                                             │
│ Что может делать:                                                           │
│   ✓ Видеть ВСЕ свои личные задачи                                         │
│   ✓ Менять статус своих задач (Offen → In Bearbeitung → Erledigt)         │
│   ✓ Видеть только проекты где он назначен                                  │
│   ✓ Комментировать в своих проектах/задачах                               │
│   ✓ Видеть другие задачи своего проекта (но может менять только свои)      │
│   ✓ Просмотреть свой профиль                                               │
│                                                                             │
│ ВАЖНО: Самый ограниченный доступ                                           │
│        Может видеть только информацию связанную с его работой               │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│ 5. BÜRO (Офисный сотрудник)                                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ Где может зайти:                                                            │
│   ✓ Dashboard, Aufgaben, Benutzer, Kunden, Projekte, Support, Kategorien, │
│     LagerDashboard, Protokoll, LagerBenutzer                               │
│   ✗ НЕ может: Waren, Terminal (но видит все в LagerDashboard)             │
│                                                                             │
│ Что может делать:                                                           │
│   ✓ Управлять клиентами (CRUD)                                            │
│   ✓ Видеть ВСЕ проекты                                                     │
│   ✓ Видеть ВСЕ задачи                                                      │
│   ✓ Управлять документами                                                  │
│   ✓ Работать с поддержкой (tickets)                                        │
│   ✓ Просматривать историю складских операций                               │
│   ✓ Просматривать работников склада                                        │
│                                                                             │
│ ПРИМЕЧАНИЕ: Офисная работа - видит почти все кроме прямой работы со складом│
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│ 6. WAREHOUSE (Сотрудник склада)                                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ Где может зайти:                                                            │
│   ✓ Dashboard, Aufgaben, Benutzer, Kategorien, LagerDashboard, Waren,     │
│     Terminal, Protokoll, LagerBenutzer                                      │
│   ✗ НЕ может: Kunden, Projekte (но видит их в Terminal привязке)          │
│                                                                             │
│ Что может делать:                                                           │
│   ✓ Видеть все товары                                                       │
│   ✓ Управлять товарами (создавать, редактировать)                         │
│   ✓ Работать с Terminal (сканировать QR коды!)                            │
│   ✓ Вводить выемку материалов (Entnahme)                                   │
│   ✓ Вводить возврат материалов (Rückgabe)                                 │
│   ✓ Вводить приход товаров (Eingang)                                      │
│   ✓ Просматривать всю историю операций (Protokoll)                        │
│   ✓ Видеть другие рабочие склада                                           │
│                                                                             │
│ ПРИМЕЧАНИЕ: Работа со складом - все операции связанные с материалами       │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════════
ЧАСТЬ 3: ИЕРАРХИЯ И ВИДИМОСТЬ КОНТАКТОВ
═══════════════════════════════════════════════════════════════════════════════════

СТРУКТУРА ИЕРАРХИИ (каждый работник имеет "vorgesetzter_id" - начальника):

  Компания
  │
  ├─ Admin (видит всех)
  │
  ├─ Projektleiter А (видит своих Gruppenleiter'ов и Worker'ов)
  │  ├─ Gruppenleiter 1 (видит только своих Worker'ов)
  │  │  ├─ Worker 1
  │  │  └─ Worker 2
  │  └─ Worker 3 (не имеет подчиненных)
  │
  ├─ Projektleiter Б
  │  └─ Gruppenleiter 2
  │     └─ Worker 4
  │
  ├─ Büro (видит всех)
  │
  └─ Warehouse (видит все инвентарь)


КОГДА ВЫБИРАЕШЬ ЛЮДЕЙ НА ЗАДАЧУ:
  ✓ Admin → видит всех
  ✓ Projektleiter А → видит только своих (Gruppenleiter'ов и Worker'ов)
  ✓ Gruppenleiter 1 → видит только своих Worker'ов (1, 2)
  ✓ Worker 1 → видит только себя
  ✓ Büro → видит всех
  ✓ Warehouse → видит всех (для координации)


═══════════════════════════════════════════════════════════════════════════════════
ЧАСТЬ 4: ОСНОВНЫЕ СУЩНОСТИ (ENTITY) И ЧТО С НИМИ ДЕЛАТЬ
═══════════════════════════════════════════════════════════════════════════════════

СУЩНОСТЬ 1: PROJEKT (Проект)
─────────────────────────────────────────────────────────────────────────────────
ЧТО ЭТО:
  Основная единица - один строительный проект. Например: "Ремонт офиса на ул. Васи"

ПОЛЯ:
  projekt_nummer      "EP-1001"        (автоматом генерируется)
  name                "Ремонт офиса"
  beschreibung        Подробное описание
  kunde_id            ↓ Ссылка на Kunde (клиент)
  startdatum          2024-01-01
  enddatum            2024-03-01
  budget              50000            (в евро)
  adresse             "Ул. Васи 123"
  status              "In Bearbeitung"
  prioritaet          "Hoch"
  kategorie           "Renovierung"    (можно задать подкатегорию)
  foto, fotos         URLs фотографий
  projektleiter_id    ↓ Кто руководит
  gruppenleiter_ids   [↓, ↓, ...]      Массив групплидеров
  worker_ids          [↓, ↓, ...]      Массив рабочих
  subunternehmer_ids  [↓, ↓, ...]      Массив подрядчиков

ГДЕ МОЖНО СОЗДАТЬ:
  ProjektNeu страница → 2 шага: выбор клиента, заполнение данных

ЧТО МОЖНО ДЕЛАТЬ:
  ✓ Создать (Projektleiter, Büro, Admin)
  ✓ Редактировать (только свои)
  ✓ Удалить (только свои)
  ✓ Просмотреть (видеть если ты в проекте или ты Admin/Büro)
  ✓ Добавить этапы (Etappe)
  ✓ Загрузить документы (Dokument)
  ✓ Посмотреть задачи проекта (Aufgabe)
  ✓ Обсудить через комментарии


СУЩНОСТЬ 2: AUFGABE (Задача)
─────────────────────────────────────────────────────────────────────────────────
ЧТО ЭТО:
  Конкретная работа которую нужно выполнить. Может быть привязана к проекту или общая.
  Например: "Покрасить стену красной краской" для проекта "Ремонт офиса"

ПОЛЯ:
  titel               "Покрасить стену"
  beschreibung        Подробно что, как и почему
  projekt_id          ↓ К какому проекту относится
  zugewiesen_an       ↓ На кого назначена (Benutzer ID)
  status              "Offen"          (Offen → In Bearbeitung → Erledigt)
  prioritaet          "Mittel"
  faellig_am          2024-02-15       (дедлайн)

ГДЕ МОЖНО СОЗДАТЬ:
  Aufgaben страница → modal форма

ЧТО МОЖНО ДЕЛАТЬ:
  ✓ Создать (если видишь проект и можешь назначать)
  ✓ Редактировать (если ты Projektleiter или Gruppenleiter)
  ✓ Удалить (если ты Projektleiter+)
  ✓ Менять статус (если ты автор или это твоя задача)
  ✓ Комментировать (обсуждать с командой)
  ✓ @mention других для привлечения

ВИДИМОСТЬ:
  Admin/Büro → видят все задачи
  Projektleiter → видят только свои проекты + задачи
  Gruppenleiter → видят задачи своих Worker'ов
  Worker → видят только свои задачи


СУЩНОСТЬ 3: WARE (Товар/Материал)
─────────────────────────────────────────────────────────────────────────────────
ЧТО ЭТО:
  Физические материалы которые хранятся на складе и используются в проектах.
  Например: "Красная краска", "Гвозди 5мм", "Доска дубовая"

ПОЛЯ:
  name                "Красная краска"
  barcode             "4820178530012"  (уникален! для сканирования)
  kategorie_id        ↓ Категория (краски, гвозди и т.д.)
  einheit             "l"              (литры, штуки, килограммы и т.д.)
  einkaufspreis       15.50            (сколько стоит закупить)
  verkaufspreis       18.00            (сколько взимаем с клиента)
  bestand             50               (сколько есть сейчас на складе)
  mindestbestand      10               (когда нужно переупорядочить)
  lagerort            "Полка 3"
  status              "Verfügbar"      (Verfügbar → Niedrig → Ausverkauft)
  bild                URL фото товара

ГДЕ МОЖНО УПРАВЛЯТЬ:
  Waren страница → список товаров

ЧТО МОЖНО ДЕЛАТЬ (только Warehouse):
  ✓ Создать товар
  ✓ Редактировать (цены, местоположение)
  ✓ Удалить (если не используется)
  ✓ Сканировать на Terminal (QR код)


СУЩНОСТЬ 4: WARENLOG (История материалов)
─────────────────────────────────────────────────────────────────────────────────
ЧТО ЭТО:
  Автоматический логирование каждого действия с материалами.
  "Кто, когда, с какой вещью, сколько, какое действие"

СОЗДАЕТСЯ АВТОМАТОМ КОГДА:
  1. На Terminal сканируешь товар
  2. Выбираешь действие:
     ✓ Entnahme (выемка) → уменьшаем bestand
     ✓ Rückgabe (возврат) → увеличиваем bestand
     ✓ Eingang (приход товара) → увеличиваем bestand
     ✓ Korrektur (исправление) → меняем на нужное количество
     ✓ Inventur (инвентаризация) → проверка

ПОЛЯ:
  ware_id             ↓ Какой товар
  benutzer_id         ↓ Кто выполнил действие
  projekt_id          ↓ (опционально) какой проект
  aktion              "Entnahme"
  menge               5                (количество)
  datum               2024-02-15 14:30 (когда автоматом)

ГДЕ МОЖНО ВИДЕТЬ:
  Protokoll страница → таблица всех операций


СУЩНОСТЬ 5: ETAPPE (Этап/Фаза проекта)
─────────────────────────────────────────────────────────────────────────────────
ЧТО ЭТО:
  Разбиение большого проекта на фазы. Например проект "Ремонт офиса" состоит из:
  1. Подготовка (демонтаж старого)
  2. Основные работы (штукатурка, покраска)
  3. Финишные работы (укладка полов, монтаж дверей)

ПОЛЯ:
  projekt_id          ↓ К какому проекту
  name                "Подготовка"
  beschreibung        Описание фазы
  status              "In Bearbeitung"
  bilder              [URL, URL, ...]  Фото этапа
  reihenfolge         1                (в каком порядке идет)

ГДЕ МОЖНО УПРАВЛЯТЬ:
  ProjektDetail → tab "Etappen"

ЧТО МОЖНО ДЕЛАТЬ:
  ✓ Добавить новую этапу
  ✓ Менять статус (Geplant → In Bearbeitung → Abgeschlossen)
  ✓ Загружать фото каждой этапы
  ✓ Удалить этапу
  ✓ Комментировать этапу (обсуждение)


СУЩНОСТЬ 6: DOKUMENT (Документ)
─────────────────────────────────────────────────────────────────────────────────
ЧТО ЭТО:
  Файлы относящиеся к проекту. Планы, контракты, счета и т.д.

ПОЛЯ:
  projekt_id          ↓ К какому проекту
  titel               "Генеральный план"
  typ                 "Plan"           (План, Контракт, Счет, Отчет)
  datei_url           URL файла
  datei_name          "general_plan.pdf"
  tags                ["план", "архитектура"]
  status              "Aktiv"          (Aktiv или Archiviert)

ГДЕ МОЖНО УПРАВЛЯТЬ:
  ProjektDetail → tab "Dokumente"

ЧТО МОЖНО ДЕЛАТЬ:
  ✓ Загрузить новый документ
  ✓ Удалить документ
  ✓ Архивировать (убрать но не удалять)


СУЩНОСТЬ 7: KOMMENTAR (Комментарий)
─────────────────────────────────────────────────────────────────────────────────
ЧТО ЭТО:
  Обсуждение и общение по поводу проекта/задачи/этапы.

ПОЛЯ:
  entitaet_typ        "Projekt"        (или Aufgabe, Etappe, Dokument)
  entitaet_id         ↓ ID проекта/задачи/и т.д.
  inhalt              "Нужно переделать покраску"
  benutzer_id         ↓ Кто написал
  benutzer_name       "Иван Петров"
  parent_kommentar_id ↓ (опционально) если это ответ на другой комментарий
  mentions            [{ id: "...", name: "..." }]  Упомянутые люди

ГДЕ МОЖНО КОММЕНТИРОВАТЬ:
  ✓ ProjektDetail → tab "Diskussion" (комментарии к проекту)
  ✓ Aufgaben → inline на каждой задаче
  ✓ На Etappen (комментарии к фазе)

ЧТО МОЖНО ДЕЛАТЬ:
  ✓ Написать комментарий
  ✓ Ответить на комментарий (reply)
  ✓ @mention коллегу (напишите @ и выберите из списка)
  ✓ Удалить свой комментарий (или админ может удалить любой)


ОСТАЛЬНЫЕ СУЩНОСТИ:
─────────────────────────────────────────────────────────────────────────────────
  • KUNDE (Клиент) → CRUD через Kunden страница
  • BENUTZER (Сотрудник) → CRUD через Benutzer страница
  • SUBUNTERNEHMER (Подрядчик) → CRUD через Subunternehmer страница
  • KATEGORIE (Категория) → CRUD через Kategorien страница
  • TICKET (Поддержка) → CRUD через Support страница


═══════════════════════════════════════════════════════════════════════════════════
ЧАСТЬ 5: ГЛАВНЫЕ СТРАНИЦЫ И ЧТО НА НИХ
═══════════════════════════════════════════════════════════════════════════════════

ГЛАВНОЕ МЕНЮ (видно в левой панели):

Allgemein (Основное):
  ✓ Dashboard          Главная панель с информацией
  ✓ Aufgaben           Все задачи
  ✓ Benutzer           Управление людьми
  ✓ Subunternehmer     Управление подрядчиками
  ✓ Kunden             Управление клиентами
  ✓ Projekte           Список всех проектов
  ✓ Kategorien         Управление категориями
  ✓ Support            Система поддержки (tickets)

Lagerverwaltung (Управление складом):
  ✓ Lager-Dashboard    Информация о складе
  ✓ Waren              Товары и материалы
  ✓ Terminal           Сканирование QR кодов (специальный интерфейс)
  ✓ Protokoll          История операций со складом
  ✓ Lager-Benutzer     Работники склада


ГЛАВНЫЕ СТРАНИЦЫ:
─────────────────────────────────────────────────────────────────────────────────

[DASHBOARD] - Главная панель
  Что видит:
    • Статистика: сколько проектов в каком статусе
    • Предстоящие дедлайны (задачи на 14 дней вперед)
    • Состояние бюджетов проектов
    • Недавние действия в системе
  Для кого: все роли
  Что можно делать: смотреть, выбирать какие виджеты показывать

[PROJEKTE] - Список проектов
  Что видит:
    • Карточки проектов (название, номер EP-XXXX, клиент, статус, приоритет)
    • Даты (начало и конец)
    • Назначенные люди (аватары)
  Для кого: Admin, Büro, Projektleiter, Gruppenleiter, Worker (видят свои)
  Что можно делать:
    • Клик на проект → ProjektDetail (полная информация)
    • Edit → редактировать
    • Delete → удалить
    • Поиск по названию
    • Фильтр по статусу

[PROJEKTNEU] - Создание проекта (2 шага)
  Шаг 1: Выбрать или создать клиента
  Шаг 2: Заполнить данные проекта
    • Название, описание
    • Категория (с подкатегориями)
    • Даты, бюджет, адрес
    • Назначить Projektleiter, Worker'ов, подрядчиков
    • Загрузить фото (с камеры или галереи!)
  Для кого: Projektleiter, Büro, Admin

[PROJEKTDETAIL] - Полная информация проекта (TABS)
  Tabs:
    1. Details          Основная информация (название, бюджет, люди и т.д.)
    2. Etappen          Фазы работ (добавить, редактировать, загрузить фото)
    3. Materialien      История использования материалов (таблица)
    4. Dokumente        Загруженные файлы (планы, контракты и т.д.)
    5. Diskussion       Обсуждение через комментарии
    6. Bericht          Отчет (визуализация прогресса, экспорт в PDF)
  Для кого: кто участвует в проекте

[AUFGABEN] - Список задач
  Что видит:
    • Таблица задач (название, проект, статус, приоритет, назначен на кого, дедлайн)
    • Цветные статусы и приоритеты
  Для кого: все роли (видят разные задачи)
  Что можно делать:
    • Создать новую задачу (modal форма)
    • Редактировать задачу
    • Удалить задачу
    • Менять статус (Offen → In Bearbeitung → Erledigt)
    • Комментировать задачу
    • Фильтр по статусу, пользователю, проекту
    • Поиск по названию

[WAREN] - Управление товарами
  Что видит:
    • Таблица товаров (название, barcode, количество, минимум, статус)
  Для кого: Warehouse, Admin, Büro
  Что можно делать:
    • Создать товар (name, barcode, цены, количество)
    • Редактировать товар
    • Удалить товар
    • Загрузить фото товара

[TERMINAL] - Сканирование QR кодов (СПЕЦИАЛЬНАЯ СТРАНИЦА)
  Дизайн: полный экран, большие кнопки (для планшета!)
  Как работает:
    1. Введи barcode (сканируешь QR code)
    2. Выбери действие:
       • Entnahme (выемка) - уменьшить количество
       • Rückgabe (возврат) - увеличить количество
       • Eingang (приход) - приход нового товара
    3. Введи количество
    4. (Опционально) выбери проект если нужно привязать
    5. Подтверди
    → Создается WarenLog запись, bestand меняется
  Для кого: Warehouse
  Примечание: это основной способ отслеживания материалов

[PROTOKOLL] - История операций со складом
  Что видит:
    • Таблица всех WarenLog записей
    • Кто, когда, с каким товаром, сколько, какое действие
  Для кого: Warehouse, Büro, Admin
  Что можно делать:
    • Фильтр по дате
    • Фильтр по товару
    • Фильтр по действию
    • Просмотреть всю историю

[BENUTZER] - Управление сотрудниками
  Что видит:
    • Таблица всех сотрудников
    • Имя, должность, email, телефон, начальник
  Для кого: Admin, Büro (видят всех), другие видят себя и подчиненных
  Что можно делать:
    • Создать нового сотрудника
    • Редактировать сотрудника
    • Удалить сотрудника
    • Установить начальника (иерархия)
    • Загрузить фото профиля

[KUNDEN] - Управление клиентами
  Таблица клиентов (компания, контактное лицо, email, адрес)
  Для кого: Projektleiter, Büro, Admin
  Что можно делать: CRUD

[SUBUNTERNEHMER] - Управление подрядчиками
  Таблица подрядчиков (компания, специальность, контакты, ставка)
  Для кого: Projektleiter, Büro, Admin
  Что можно делать: CRUD

[KATEGORIEN] - Управление категориями
  Для кого: Admin, Büro, Projektleiter
  Что можно делать:
    • Создать категорию (Projekt или Ware тип)
    • Создать подкатегорию (parent_id)
    • Добавить динамические поля (zusatzfelder)
      Например: поле "площадь комнаты" (number), "тип отделки" (select)
    • Редактировать, удалить

[LAGERDASHBOARD] - Панель управления складом
  Для кого: Warehouse, Büro, Admin
  Что видит:
    • Товары с низким уровнем запасов (красным)
    • Недавние операции
    • Статистика по категориям

[SUPPORT] - Система поддержки (Tickets)
  Для кого: Büro, Admin
  Таблица tickets от клиентов
  Что можно делать:
    • Просмотреть ticket
    • Ответить на ticket
    • Менять статус (Neu → In Bearbeitung → Beantwortet → Geschlossen)
    • Назначить на себя или коллегу

[BENUTZERLLOGIN] - Вход в систему
  Форма: Email + Passwort
  Для кого: любой (перед входом в систему)


═══════════════════════════════════════════════════════════════════════════════════
ЧАСТЬ 6: КАК ВСЕ РАБОТАЕТ ВМЕСТЕ (ПРИМЕРЫ СЦЕНАРИЕВ)
═══════════════════════════════════════════════════════════════════════════════════

СЦЕНАРИЙ 1: НАЧАЛО НОВОГО ПРОЕКТА
─────────────────────────────────────────────────────────────────────────────────

Наступает новый проект "Ремонт квартиры"

1. Projektleiter (например Иван) заходит на Projekte → нажимает "Neues Projekt"

2. Шаг 1: Выбирает клиента или создает нового
   → Выбирает существующего "ООО Стройка" или создает "Петров В.В."

3. Шаг 2: Заполняет данные
   • Название: "Ремонт квартиры на Красной 45"
   • Описание: "Полный ремонт 2-комнатной квартиры"
   • Дата начала: 2024-03-01
   • Дата конца: 2024-05-01
   • Бюджет: 40000 евро
   • Категория: "Renovierung"
   • Приоритет: "Hoch"
   • Адрес: "Красная 45, кв. 12"
   • Назначает себя как Projektleiter
   • Назначает 2 Gruppenleiter'ов (Петя и Маша)
   • Назначает 5 Worker'ов
   • Выбирает подрядчика "Мастер-сервис" (электрик)
   • Загружает фото квартиры (с камеры!) - 3 фото

4. Сохраняет → создается проект EP-2024

5. Теперь может:
   • Добавить 3 Etappen (подготовка, основные работы, финиш)
   • Загрузить планы (Dokument)
   • Начать обсуждение в Diskussion табе


СЦЕНАРИЙ 2: НАЗНАЧЕНИЕ ЗАДАЧ
─────────────────────────────────────────────────────────────────────────────────

Иван (Projektleiter) входит на Aufgaben

Создает новую задачу:
  • Название: "Демонтировать старые полы"
  • Проект: "Ремонт квартиры" (EP-2024)
  • Назначена на: Петя (Gruppenleiter)
  • Приоритет: Hoch
  • Дедлайн: 2024-03-10

Петя (Gruppenleiter) видит эту задачу. Может создать подзадачу для своих Worker'ов:
  • Название: "Убрать плинтуса"
  • Назначена на: Саша (его Worker)

Саша (Worker) видит задачу, начинает работу:
  • Нажимает на задачу, меняет статус: Offen → In Bearbeitung
  • Может написать комментарий: "@Петя Начали демонтаж, будет готово завтра"
  • Петя получит уведомление что его упомянули

После работы Саша меняет статус на Erledigt
Петя видит что готово, может проверить и подтвердить


СЦЕНАРИЙ 3: ИСПОЛЬЗОВАНИЕ МАТЕРИАЛОВ
─────────────────────────────────────────────────────────────────────────────────

На складе есть товар: "Краска красная" (1000 литров в наличии, barcode 4820178530012)

Начинается проект "Ремонт квартиры" и нужно взять со склада 50 литров краски.

Сотрудник Warehouse (Олег) берет планшет, открывает Terminal:
  1. Сканирует barcode краски → система находит товар
  2. Выбирает действие: Entnahme (выемка)
  3. Вводит количество: 50
  4. Привязывает к проекту: EP-2024 "Ремонт квартиры"
  5. Нажимает Confirm

Автоматом:
  • Создается WarenLog запись (кто, когда, что, сколько, действие)
  • Bestand краски уменьшается: 1000 → 950 литров
  • Статус может измениться если упал ниже mindestbestand

Позже можно открыть Protokoll и увидеть всю историю использования краски.


СЦЕНАРИЙ 4: ОБСУЖДЕНИЕ ПРОЕКТА
─────────────────────────────────────────────────────────────────────────────────

Иван смотрит проект EP-2024. Открывает tab "Diskussion"

Видит комментарии всех участников проекта.

Пишет комментарий:
  "Ребята, нужно переделать электропроводку. @Петр (подрядчик) - ты когда сможешь?"

Петр (Subunternehmer) видит что его упомянули (или Admin видит и передает).
Отвечает: "@Иван Могу прийти 15-го числа, есть ли другие работы?"

Иван отвечает Reply на его комментарий.

Получается красивое обсуждение с вложенными ответами.


═══════════════════════════════════════════════════════════════════════════════════
ЧАСТЬ 7: ДОПОЛНИТЕЛЬНЫЕ ФУНКЦИИ
═══════════════════════════════════════════════════════════════════════════════════

✓ КАМЕРА/ФОТО
  На ProjektNeu можешь загрузить фото:
  • С камеры (кнопка "Kamera" - задняя камера на телефоне)
  • Из галереи (кнопка "Galerie")
  • На планшете идеально работает для снимания "до и после"

✓ PWA (МОБИЛЬНОЕ ПРИЛОЖЕНИЕ)
  • Можешь "установить" как приложение (Установить на экран)
  • Работает offline (кэширование)
  • Может получать push notifications (когда назначена новая задача)
  • На мобильном: меню сворачивается, кнопка burger menu

✓ PDF ОТЧЕТЫ
  На ProjektDetail → tab "Bericht"
  Можешь сгенерировать PDF отчет с:
  • Всей информацией проекта
  • Статусом каждой этапы
  • Графиком бюджета
  • Скачать или отправить клиенту

✓ ДИНАМИЧЕСКИЕ ПОЛЯ
  Если выбираешь категорию "Реновация жилого дома" → подкатегория "Спальня"
  → могут быть дополнительные поля:
  • "Площадь комнаты" (number)
  • "Тип отделки" (select: дерево, краска, обои)
  • "Количество окон" (number)
  Все это сохраняется в проекте


═══════════════════════════════════════════════════════════════════════════════════
ЧАСТЬ 8: БЫСТРАЯ ИНСТРУКЦИЯ ДЛЯ ДРУГОГО ИИ
═══════════════════════════════════════════════════════════════════════════════════

ЕСЛИ ТЫ ДРУГОЙ ИИ И ХОЧЕШЬ СОЗДАТЬ ЭТОТ ПРОЕКТ С НУЛЯ:

ШАГ 1: СОЗДАТЬ ENTITIES (СУЩНОСТИ)
  Сделай 12 файлов в entities/:
    • Projekt.json
    • Benutzer.json
    • Aufgabe.json
    • Ware.json
    • WarenLog.json
    • Etappe.json
    • Kommentar.json
    • Dokument.json
    • Kategorie.json
    • Kunde.json
    • Subunternehmer.json
    • Ticket.json

ШАГ 2: СОЗДАТЬ КОМПОНЕНТЫ (ПЕРЕИСПОЛЬЗУЕМЫЕ)
  Обязательные:
    • CommentThread.jsx (отображение комментариев)
    • CommentForm.jsx (форма для комментариев)
    • CameraPhotoUpload.jsx (загрузка фото с камеры)
    • EtappenManager.jsx (управление этапами)
    • DokumentManager.jsx (управление документами)
    • ProjectReport.jsx (отчет и PDF)
    • DashboardCustomizer.jsx (выбор виджетов)

ШАГ 3: СОЗДАТЬ КОМПОНЕНТЫ ДЛЯ DASHBOARD ВИДЖЕТОВ
  • ProjectStatusSummary (диаграмма)
  • UpcomingDeadlines (таблица)
  • BudgetOverview (карточки)
  • RecentActivity (активность)

ШАГ 4: СОЗДАТЬ LAYOUT
  • Layout.js - главный контейнер со всеми меню, боковая панель,
    функции canAccessPage(), canAccessMenu(), иерархия

ШАГ 5: СОЗДАТЬ ОСНОВНЫЕ СТРАНИЦЫ
  • Dashboard.js
  • Projekte.js
  • ProjektNeu.js (2-шаговая форма)
  • ProjektDetail.js (tabs)
  • ProjektBearbeiten.js
  • Aufgaben.js
  • Benutzer.js
  • Kunden.js
  • Subunternehmer.js
  • Kategorien.js
  • Waren.js
  • Terminal.js (специальный интерфейс)
  • LagerDashboard.js
  • Protokoll.js
  • Support.js
  • BenutzerLogin.js
  • LagerBenutzer.js

ШАГ 6: PWA ПОДДЕРЖКА
  • Создать Service Worker для offline
  • Добавить PWAInstallPrompt компонент
  • Manifest.json

ШАГ 7: ЛОГИКА И СВЯЗИ
  • Используй Base44 SDK для всех операций
  • Реализуй ACL (canAccessPage, isSupervisor logic)
  • Иерархия через vorgesetzter_id
  • Комментарии через CommentThread компонент везде нужно

ШАГ 8: ТЕСТИРОВАНИЕ
  • Создай тестовые данные (несколько пользователей, проектов)
  • Переключайся между ролями (используй localStorage "benutzer_session")
  • Проверь видимость для каждой роли


═══════════════════════════════════════════════════════════════════════════════════
ИТОГО
═══════════════════════════════════════════════════════════════════════════════════

Это веб-приложение для управления строительными проектами с:
  ✓ 6 ролями и разным доступом
  ✓ Иерархией начальник-подчиненный
  ✓ Управлением проектами, задачами, материалами
  ✓ Обсуждениями с @mentions
  ✓ Мобильной поддержкой и PWA
  ✓ Загрузкой фото с камеры

Сложность: СРЕДНЯЯ-ВЫСОКАЯ
Компонентов: ~30 компонентов
Сущностей: 12
Страниц: 15
Время разработки (для одного ИИ): 4-6 часов

Главная фишка: Иерархия + ACL + Комментарии + Управление материалами + PWA

═══════════════════════════════════════════════════════════════════════════════════
*/

export default function AIProjectBrief() {
  return (
    <div className="p-8 max-w-4xl mx-auto">
      <h1 className="text-4xl font-bold mb-6">📋 EP-System для ИИ</h1>
      <div className="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
        <p className="text-lg mb-4">
          Полное описание проекта находится в комментариях этого файла.
        </p>
        <p className="text-slate-700">
          Откройте исходный код (SYSTEM_DOCUMENTATION.jsx и этот файл) чтобы получить полную информацию для воссоздания проекта с нуля.
        </p>
      </div>
      
      <div className="grid gap-4">
        <div className="bg-white p-4 border rounded-lg">
          <h3 className="font-bold text-lg mb-2">🎯 6 Ролей</h3>
          <p>Admin, Projektleiter, Gruppenleiter, Worker, Büro, Warehouse</p>
        </div>
        
        <div className="bg-white p-4 border rounded-lg">
          <h3 className="font-bold text-lg mb-2">📊 12 Сущностей</h3>
          <p>Projekt, Aufgabe, Ware, WarenLog, Etappe, Kommentar, Dokument, Kategorie, Kunde, Benutzer, Subunternehmer, Ticket</p>
        </div>
        
        <div className="bg-white p-4 border rounded-lg">
          <h3 className="font-bold text-lg mb-2">📱 Особенности</h3>
          <p>PWA, Offline, Камера, Иерархия, ACL, Комментарии с @mentions, QR коды, PDF отчеты</p>
        </div>
      </div>
    </div>
  );
}